---
/**
 * Ramadan Giving - Template Switchable Page
 * Renders different templates based on admin settings
 *
 * Available Templates:
 * - 'amanah': Modern mobile-first 6-step wizard with cloud background
 * - 'pennyappeal': Original 30 Days of Ramadan wizard with green theme
 *
 * Change template in Admin > Settings > Templates > Ramadan Page Template
 */
export const prerender = false;

import { supabaseAdmin } from '../lib/supabase';

// Import available templates
import AmanahTemplate from '../templates/ramadan/AmanahTemplate.astro';
import PennyAppealTemplate from '../templates/ramadan/PennyAppealTemplate.astro';

// Fetch current template setting from database
let currentTemplate = 'amanah'; // Default to amanah

try {
  const { data: settings } = await supabaseAdmin
    .from('site_settings')
    .select('ramadan_page_template')
    .eq('id', 'main')
    .single();

  if (settings?.ramadan_page_template) {
    currentTemplate = settings.ramadan_page_template;
  }
} catch (error) {
  console.error('Error fetching template setting:', error);
  // Default to amanah if there's an error
}
---

{currentTemplate === 'amanah' && <AmanahTemplate />}
{currentTemplate === 'pennyappeal' && <PennyAppealTemplate />}
